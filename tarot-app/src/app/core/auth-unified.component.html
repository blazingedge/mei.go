<!-- ===========================================================
     ‚ú® INTRO EFECTO "EL MEIGO"
=========================================================== -->
<div class="intro-overlay" *ngIf="showIntro">
  <app-intro-particles></app-intro-particles>
  <h1 class="intro-text">El meigo</h1>
</div>

<!-- ===========================================================
     üßø LAYOUT PRINCIPAL AUTH
=========================================================== -->
<div class="auth-layout">
  
  <!-- LOGO / LADO IZQUIERDO -->
  <div class="auth-left">
    <app-logo></app-logo>
  </div>

  <!-- FORMULARIOS -->
  <div class="auth-right">
    <div class="auth-card">

      <!-- =============================
           üîë LOGIN
      ============================== -->
      <section class="section">
        <h2>Iniciar sesi√≥n</h2>

        <form (ngSubmit)="onLogin()" #loginForm="ngForm">
          <input type="email"
                 name="loginEmail"
                 placeholder="Email"
                 required
                 [(ngModel)]="login.email"
                 [disabled]="loading"/>

          <input type="password"
                 name="loginPassword"
                 placeholder="Contrase√±a"
                 required
                 [(ngModel)]="login.password"
                 [disabled]="loading"/>

          @if (loginError) {
            <p class="error">{{ loginError }}</p>
          }

          <button type="submit"
                  class="btn-main"
                  [disabled]="loginForm.invalid || loading">
            Entrar
          </button>
        </form>
      </section>

      <div class="divider"><span>√≥</span></div>

      <!-- =============================
           üåê LOGIN SOCIAL
      ============================== -->
      <div class="social">
        <button class="social-btn google"
                type="button"
                (click)="authGoogle()"
                [disabled]="loading">
          <img src="assets/google.svg" alt="Google login" />
        </button>

        <button class="social-btn facebook"
                type="button"
                (click)="authFacebook()"
                [disabled]="loading">
          <img src="assets/facebook.svg" alt="Facebook login" />
        </button>
      </div>
      <p class="popup-hint">
        En Chrome y Firefox debes permitir las ventanas emergentes para este sitio para usar Google.
      </p>

      <div class="divider thin"></div>

      <!-- =============================
           ü™Ñ REGISTRO
      ============================== -->
      <section class="section">
        <h2>Reg√≠strate</h2>

        <form (ngSubmit)="onRegister()" #regForm="ngForm">

          <input type="email"
                 name="regEmail"
                 placeholder="Email"
                 required
                 [(ngModel)]="register.email"
                 [disabled]="loading"/>

          <input type="password"
                 name="regPassword"
                 placeholder="Contrase√±a"
                 required
                 [(ngModel)]="register.password"
                 [disabled]="loading"/>

          <input type="password"
                 name="regConfirm"
                 placeholder="Repetir contrase√±a"
                 required
                 [(ngModel)]="register.confirm"
                 [disabled]="loading"/>

          @if (regError) {
            <p class="error">{{ regError }}</p>
          }

          <!-- CAPTCHA CORREGIDO -->
          <div id="cf-turnstile"></div>

          <!-- Bot√≥n principal -->
          <button type="submit"
                  class="btn-main"
                  [disabled]="regForm.invalid || loading">
            Crear cuenta
          </button>

          <!-- Bot√≥n de t√©rminos -->
          <button type="button"
                  class="terms-btn"
                  (click)="openTerms()">
            Ver T√©rminos y Condiciones
          </button>
        </form>
      </section>

    </div>
  </div>
</div>

<!-- ===========================================================
     üìù MODAL DE T√âRMINOS Y CONDICIONES (SE AGREGA AQU√ç)
=========================================================== -->
<app-terms-modal></app-terms-modal>
