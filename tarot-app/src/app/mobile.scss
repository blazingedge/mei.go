/* ===========================================================
   üì± MOBILE LAYOUT - spreads mobile.scss
   Se aplica SOLO en pantallas <= 768px
   =========================================================== */

@media (max-width: 768px) {

  /* --------------------------------------------
   *  RESET DE GRID DESKTOP
   * -------------------------------------------- */
  :host {
    --rail: 0px;
    --panel: 0px;
      --ink: #f4f1e7;
  --gold: #d8b565;
  --bg-dark: #0b1120;
  --bg-2: #0e1527;
  }

  .layout {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: radial-gradient(circle at top, #111623 0%, #050711 55%, #050509 100%);
  }

  /* Rail y panel derecho desaparecen en mobile */
  .rail,
  .panel {
    display: none !important;
  }

  /* --------------------------------------------
   *  HEADER MOBILE (Drucoins + Tipo de tirada + Logout)
   * -------------------------------------------- */
  .mobile-layout {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 0.75rem 0.85rem 4.5rem; /* espacio para men√∫ inferior */
    background: radial-gradient(circle at top, #10171f 0%, #080c15 55%, #05070b 100%);

  }

  .mobile-layout::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url('https://pub-dd5dcc9095b64f479cded9e2d85818d9.r2.dev/assets/v1/cards/celtic-cloth.webp');
  opacity: 0.15;
  filter: blur(7px);
  z-index: 0;
}


  .mobile-top-bar {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 0.65rem;
    align-items: center;
    padding: 0.55rem 0.75rem;
    border-radius: 999px;
    background: radial-gradient(circle at top, #161a2a 0%, #0a0d18 60%, #050712 100%);
    border: 1px solid rgba(214,178,94,0.4);
    box-shadow:
      0 8px 20px rgba(0,0,0,0.65),
      inset 0 1px 0 rgba(255,255,255,0.10);
  }

  .mobile-layout .drucoins-hud {
    position: static;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
    padding: 0.25rem 0.7rem;
    min-width: 76px;
    border-radius: 999px;
    background: rgba(5,7,18,0.9);
    border: 1px solid rgba(214,178,94,0.45);
    box-shadow: 0 4px 10px rgba(0,0,0,0.6);
  }

  .mobile-layout .drucoins-hud .coin {
    width: 22px;
    height: 22px;
    object-fit: contain;
    filter: drop-shadow(0 1px 3px rgba(0,0,0,0.7));
  }

  .mobile-layout .drucoins-hud .count {
    font-family: 'Cinzel', serif;
    font-size: 0.9rem;
    color: #f8f3dc;
  }

  .mobile-spread-select {
    display: flex;
    flex-direction: column;
    gap: 0.12rem;
    padding: 0 0.25rem;
  }

  .mobile-spread-select label {
    font-size: 0.7rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: rgba(230,234,245,0.7);
  }

  .mobile-spread-select .select-wrap {
    position: relative;
  }

  .mobile-spread-select select {
    width: 100%;
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    border: 1px solid rgba(214,178,94,0.45);
    background: radial-gradient(circle at top, #2b2f3c 0%, #191d29 50%, #10131e 100%);
    color: var(--ink);
    font-family: 'Cinzel', serif;
    font-size: 0.85rem;
    box-shadow: 0 3px 10px rgba(0,0,0,0.5);
    appearance: none;
    -webkit-appearance: none;
  }

  .logout-btn {
    appearance: none;
    border: 1px solid rgba(214,178,94,0.5);
    background: radial-gradient(circle at top, #20222f 0%, #090b14 70%);
    color: var(--ink);
    border-radius: 999px;
    padding: 0.35rem;
    display: grid;
    place-items: center;
    cursor: pointer;
    box-shadow:
      0 4px 10px rgba(0,0,0,0.7),
      inset 0 1px 0 rgba(255,255,255,0.06);
    transition: background 0.15s ease, transform 0.15s ease;
  }

  .logout-btn:hover {
    background: radial-gradient(circle at top, #2b2e40 0%, #090b14 70%);
    transform: translateY(-1px);
  }

  /* --------------------------------------------
   *  GRIMORIO (Hanging menu)
   * -------------------------------------------- */
  app-hanging-menu {
    width: 100%;
    margin-top: 0.35rem;
  }

  .hanging-menu-list {
    list-style: none;
    margin: 0;
    padding: 0.4rem 0.7rem 0.6rem;
  }

  .hanging-menu-list li + li {
    margin-top: 0.25rem;
  }

  .hanging-menu-list button {
    width: 100%;
    text-align: left;
    border-radius: 999px;
    border: 1px solid rgba(214,178,94,0.35);
    background: rgba(7,10,20,0.9);
    color: var(--ink);
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    padding: 0.35rem 0.9rem;
    cursor: pointer;
  }

  /* --------------------------------------------
   *  PANEL DE CARTA + INTERPRETACI√ìN
   * -------------------------------------------- */
  .mobile-card-panel {
    position: relative;
    display: flex;
    gap: 0.9rem;
    padding: 1rem;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 14px 28px rgba(0,0,0,0.7);
    color: var(--ink);
  }

  /* Fondo celta con cloth mobile */
  .mobile-card-panel::before {
    content: '';
    position: absolute;
    inset: -16px;
    background: url('https://pub-dd5dcc9095b64f479cded9e2d85818d9.r2.dev/assets/v1/cards/celtic-cloth-mobile.webp')
                center/cover no-repeat;
    filter: blur(1.5px);
    opacity: 0.6;
    z-index: 0;
  }

  .mobile-card-panel::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, rgba(0,0,0,0.45) 0%, rgba(0,0,0,0.75) 70%);
    z-index: 0;
  }

  .mobile-card-panel > * {
    position: relative;
    z-index: 1;
  }

  .mobile-card-panel.empty {
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .mobile-card-panel .card-preview,
  .mobile-card-panel .interpret-preview {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .mobile-card-panel .card-face {
    width: 100%;
    max-width: 190px;
    margin: 0 auto;
    border-radius: 18px;
    box-shadow: var(--card-shadow);
  }

  .interpret-preview h4 {
    margin: 0;
    font-family: 'Cinzel', serif;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 0.88rem;
  }

  .interpret-preview p {
    margin: 0;
    font-family: 'Cardo', serif;
    font-size: 0.9rem;
    line-height: 1.4;
  }

  .empty-mobile-state {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    color: var(--ink);
    align-items: center;
  }

  .mobile-card-counter {
    margin-top: 0.65rem;
    text-align: center;
    font-family: 'Cinzel', serif;
    letter-spacing: 0.08em;
    font-size: 0.75rem;
    color: rgba(230,234,245,0.7);
  }

  /* --------------------------------------------
   *  BOOK PANEL (El Grimorio) - m√≥vil
   * -------------------------------------------- */
  .book-panel {
    position: relative;
    margin-top: 0.75rem;
    border-radius: 18px;
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.35s ease;
  }

  .book-panel.open {
    max-height: 480px;
  }

  .book-panel .page {
    position: relative;
  }

  .book-panel .left-page {
    display: none; /* en m√≥vil funciona como bandeja, no 2 p√°ginas */
  }

  .book-panel .right-page {
    background: #f9f3e4;
    background-image: url('/assets/textures/paper.jpg'),
                      radial-gradient(circle at top left, #fffaf0, #f2e1b8);
    background-blend-mode: multiply;
    padding: 1.1rem 1.3rem 1.3rem;
    border-radius: 18px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.35);
  }

  .book-panel header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.6rem;
  }

  .book-panel header h2 {
    margin: 0;
    font-family: 'Cinzel', serif;
    font-size: 1.05rem;
    letter-spacing: 0.08em;
  }

  .book-panel header .close {
    background: none;
    border: none;
    font-size: 1rem;
    cursor: pointer;
  }

  .book-panel section + section {
    margin-top: 0.7rem;
  }

  .book-panel h3 {
    margin: 0 0 0.2rem;
    font-size: 0.9rem;
  }

  .book-panel p {
    margin: 0 0 0.2rem;
    font-size: 0.85rem;
  }

  .book-panel button {
    border-radius: 999px;
    border: 1px solid rgba(168,134,62,0.7);
    padding: 0.35rem 0.9rem;
    font-family: 'Cinzel', serif;
    font-size: 0.82rem;
    background: linear-gradient(180deg, #f8e5b8, #ebd18f);
    cursor: pointer;
  }

  /* --------------------------------------------
   *  CARRUSEL DE CARTAS
   * -------------------------------------------- */
  .mobile-carousel {
    margin-top: 0.65rem;
    padding-bottom: 0.5rem;
  }

  .mobile-carousel .carousel-track {
    display: flex;
    gap: 0.7rem;
    overflow-x: auto;
    padding: 0.25rem 0.25rem 0.15rem;
    scroll-snap-type: x mandatory;
  }

  .mobile-carousel .carousel-card {
    flex: 0 0 140px;
    scroll-snap-align: center;
  }

  .mobile-carousel .card-wrapper {
    background: radial-gradient(circle at top, #1b2134 0%, #070914 70%);
    border-radius: 18px;
    padding: 0.5rem 0.5rem 0.7rem;
    border: 1px solid rgba(214,178,94,0.45);
    box-shadow: 0 10px 22px rgba(0,0,0,0.7);
    text-align: center;
  }

  .mobile-carousel .card-wrapper.reversed {
    filter: hue-rotate(-8deg) saturate(1.1);
  }

  .mobile-carousel .card-face {
    width: 100%;
    border-radius: 14px;
    box-shadow: var(--card-shadow);
    margin-bottom: 0.4rem;
  }

  .mobile-carousel .card-name {
    margin: 0 0 0.4rem;
    font-family: 'Cinzel', serif;
    font-size: 0.78rem;
    color: var(--ink);
  }

  .mobile-carousel .card-wrapper button {
    border-radius: 999px;
    border: 1px solid rgba(214,178,94,0.7);
    background: rgba(10,12,24,0.9);
    color: var(--ink);
    font-family: 'Cinzel', serif;
    font-size: 0.75rem;
    padding: 0.25rem 0.8rem;
    cursor: pointer;
  }

  .carousel-nav {
    margin-top: 0.3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.7rem;
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    color: rgba(230,234,245,0.8);
  }

  .carousel-nav button {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1px solid rgba(214,178,94,0.7);
    background: rgba(10,12,24,0.9);
    color: var(--ink);
    cursor: pointer;
  }

  /* --------------------------------------------
   *  MODAL DE HISTORIAL (usa clases history-overlay/panel)
   * -------------------------------------------- */
  .history-overlay {
    position: fixed;
    z-index: 1100 !important;
    inset: 0;
    background: rgba(5, 6, 12, 0.88);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1100;
    padding: 1rem;
  }

  .history-panel {
    width: min(520px, 95vw);
    max-height: 80vh;
    background: rgba(8, 10, 20, 0.97);
    border: 1px solid rgba(214,178,94,0.5);
    border-radius: 24px;
    padding: 1.25rem 1.5rem;
    box-shadow: 0 18px 45px rgba(0,0,0,0.75);
    color: var(--ink);
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .history-panel header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.8rem;
  }

  .history-panel header h3 {
    margin: 0;
    font-family: 'Cinzel', serif;
    letter-spacing: 0.08em;
    font-size: 0.92rem;
  }

  .history-panel header .close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--ink);
    cursor: pointer;
  }

  .history-body {
    flex: 1;
    max-height: none;
    overflow-y: auto;
  }

  .history-empty {
    text-align: center;
    opacity: 0.8;
  }

  .history-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .history-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.55rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }

  .history-list .info {
    display: flex;
    flex-direction: column;
    gap: 0.12rem;
  }

  .history-list .info strong {
    font-family: 'Cinzel', serif;
    font-size: 0.85rem;
  }

  .history-list .info small {
    font-size: 0.72rem;
    opacity: 0.7;
  }

  .history-list .actions {
    display: flex;
    gap: 0.3rem;
  }

  .history-list .actions button {
    border-radius: 999px;
    border: 1px solid rgba(214,178,94,0.5);
    background: transparent;
    color: var(--ink);
    font-family: 'Cinzel', serif;
    font-size: 0.78rem;
    padding: 0.2rem 0.7rem;
    cursor: pointer;
  }

  .history-list .actions button:last-child {
    border-color: rgba(255,107,107,0.8);
  }

  /* --------------------------------------------
   *  MEN√ö INFERIOR FIJO
   * -------------------------------------------- */
 .bottom-menu {
  position: fixed;
  bottom: .85rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(420px, 92vw);
  padding: .55rem .9rem;
  border-radius: 22px;
  background: rgba(10,12,18,0.75);
  box-shadow: 0 12px 26px rgba(0,0,0,0.65);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(216,181,101,0.35);
  display: flex;
  justify-content: space-around;
  z-index: 5000;
}

.bottom-menu button {
  flex: 1;
  margin: 0 .2rem;
  border-radius: 18px;
  padding: .45rem 0;
  border: 1px solid rgba(216,181,101,0.45);
  background: radial-gradient(circle at top, rgba(35,39,50,0.65), rgba(7,9,15,0.9));
  color: var(--ink);
  font-family: 'Cinzel', serif;
  font-size: .82rem;
  transition: .18s;
}
.bottom-menu button:active {
  transform: scale(.96);
}



  /* Men√∫ redondo alternativo (tus 3 iconos) */
  .mobile-menu {
    position: fixed;
    bottom: 0.75rem;
    left: 0;
    right: 0;
    background: rgba(11,22,48,0.9);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(214,178,94,0.35);
    border-radius: 999px;
    display: flex;
    justify-content: center;
    gap: 1rem;
    padding: 0.5rem 1.5rem;
    width: min(420px, 90vw);
    margin: 0 auto;
    z-index: 1000;
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
  }

  .mobile-menu button {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 1px solid rgba(214,178,94,.45);
    background: radial-gradient(circle at top, rgba(255,255,255,0.2), rgba(14,22,44,0.9));
    box-shadow: inset 0 2px 6px rgba(255,255,255,0.15), 0 4px 10px rgba(0,0,0,0.4);
    cursor: pointer;
  }
}
